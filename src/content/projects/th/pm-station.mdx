---
title: วิทยุเสียงตามสาย PM Station
description: เว็บไซต์สำหรับโครงการ PM Station เพื่อให้นักเรียนสามารถส่งคำขอเพลงเข้าสู่รายการวิทยุเสียงตามสาย โดยการเชื่อมต่อกัย Spotify API เพื่อค้นหาในคลังเพลงได้
releaseDate: 2022-09-06
tags:
  - year 2565
  - website
  - student-council
image: https://raw.githubusercontent.com/coolkidssatit/pm-station/main/screenshots/pm-station-songrequests-search.png
gitUrl: https://github.com/coolkidssatit/pm-station
rating: 5
---

import GithubEmbed from "@/components/markdown/GithubEmbed.astro";
import ResponsiveBanner from "@/components/markdown/ResponsiveBanner.astro";

โครงการวิทยุเสียงตามสาย PM Station เป็นโครงการจากคณะกรรมการนักเรียนฝ่ายเทคโนโลยีสารสนเทศ
โดยมีวัตถุประสงค์เพื่อ

- ใช้เป็นช่องทางการประชาสัมพันธ์ข้อมูลข่าวสารของโรงเรียน
- ทำให้บรรยากาศช่วงเช้าภายในโรงเรียนมีสีสันมากยิ่งขึ้น
- เปิดโอกาสให้นักเรียนที่มีความสนใจในการจัดรายการวิทยุได้ฝึกฝนทักษะในด้านนี้

คณะกรรมการนักเรียนได้เริ่มจัดรายการวิทยุเสียงตามสายตั้งแต่วันที่ 8 กันยายน 2565 เป็นต้นมา
โดยมีการพัฒนาเว็บไซต์มาช่วยในการจัดรายการวิทยุให้มีประสิทธิภาพมากยิ่งขึ้น

## ที่มาของผลงาน

ในรายการวิทยุเสียงตามสาย องค์ประกอบที่สำคัญองค์ประกอบหนึ่งนั่นก็คือ **เพลง** สำหรับเปิดในรายการ
ซึ่งในการรับคำขอเพลงเดิมน้้นจะใช้วิธีการต่าง ๆ เช่น เลือกโดยผู้จัดรายการเอง ให้นักเรียนส่งคำขอมาทางช่องทางโซเชียล
หริอกระทั่งให้นักเรียนหรือบุคคลที่สนใจมาส่งคำขอเพลงโดยตรงที่ห้องประชาสัมพันธ์เป็นต้น ซึ่งในแต่ละวิธีการก็มีข้อเสียต่าง ๆ เช่น

- **เลือกโดยผู้จัดรายการเอง** เพลงที่เปิดจากผู้จัดรายการอาจไม่มีความหลากหลาย นักเรียนซึ่งเป็นผู้ฟังไม่ได้มีส่วนร่วมการเลือกเพลง
- **ส่งคำขอทางช่องทางโซเชียล** คำขอเพลงที่ส่งเข้ามาอาจไม่มีความเป็นระเบียบเรียบร้อย รวบรวมและนำไปใช้ต่อได้ยาก
- **ส่งคำขอเพลงโดยตรงที่ห้องประชาสัมพันธ์** อาจรบกวนการจัดรายการของผู้จัดรายการในขณะนั้น

ผมจึงมีแนวคิดที่จะจัดทำเว็บไซต์สำหรับจัดการคำขอเพลงในรายการโดยเฉพาะ โดยตั้งอยู่บนหลักการสำคัญ 3 ข้อด้วยกัน

1. **ระบบจะต้องสามารถใช้งานได้ง่าย** มีรูปแบบการใช้งานที่เรียบง่าย เพื่อให้สามารถใช้งานได้กับทุกคน
2. **สามารถรวบรวมและนำเพลงไนระบบไปใช้ได้ต่อได้** ผู้จัดรายการจะต้องสามารถเรียกดูรายการคำขอเพลงที่ส่งเข้ามาได้ และสามารถนำเพลงไปค้นหาหรือเปิดต่อได้
3. **สามารถปฏิเสธเพลงที่ไม่เหมาะสมในระบบได้** การคัดกรองเนื้อหาก่อนจัดรายการมีความสำคัญมาก หากเพลงใดที่มีเนื้อหาไม่เหมาะสม ต้องสามารถปฏิเสธในระบบได้

## หลักการทำงาน

โครงการ PM Station เขียนด้วยภาษา TypeScript เป็นหลัก มีลักษณะของ Project เป็น Monorepo มีส่วนประกอบดังต่อไปนี้

### ส่วนที่ 1 การจัดการคำขอเพลง

ส่วนการจัดการคำขอเพลง เป็นส่วนประกอบหลักของ Project นี้ จัดทำเป็นเว็บไซต์โดยใช้ React Framework เป็น Remix
และเผยแพร่เว็บไซต์นี้ผ่านทางแพลตฟอร์ม Fly.io และ Vercel
เว็บไซต์นี้ทำหน้าที่รับคำขอเพลงจากผู้ใช้งาน และจัดการคำขอเพลงที่ได้รับโดยผู้จัดรายการและบุคคลที่เกี่ยวข้อง

<ResponsiveBanner />

#### 1. การเข้าสู่ระบบ

เว็บไซต์นี้ใช้ **Firebase Authentication** เป็นระบบตรวจสอบสิทธิ์ผู้ใช้งาน โดยตั้งค่าให้สามารถเข้าสู่ระบบโดยใช้หมายเลขโทรศัพท์ (Phone Login) ได้ ซึ่ง Firebase มีโควตาการใช้งานฟรี ทำให้ไม่เสียค่าใช้จ่ายแต่อย่างใด

เมื่อผู้ใช้งานเข้าสู่เว็บไซต์ จะปรากฏหน้าสำหรับป้อนเบอร์โทรศัพท์ และรับรหัส OTP ดังรูป

เมื่อเข้าสู่ระบบสำเร็จแล้ว ในครั้งแรกจะให้ผู้ใช้งานลงทะเบียนข้อมูลก่อน โดยประกอบด้วยชื่อ (`displayName`) และประเภทของผู้ใช้ (`type`) ส่วนตำแหน่งของผู้ใช้ (`role`) จะถูกตั้งค่าเริ่มต้นเป็นผู้ใช้งาน ดังรูป

ประเภทและตำแหน่งของผู้ใช้ในระบบมีรายการดังต่อไปนี้

<GithubEmbed
  file="https://github.com/coolkidssatit/pm-station/blob/main/packages/pm-station-shared/user.ts"
  startLine={3}
  endLine={10}
/>

ข้อมูลที่ได้จาการลงทะเบียนจะถูกจัดเก็บลงใน Token ของ Firebase Authentication ด้วย [Custom Claims](https://firebase.google.com/docs/auth/admin/custom-claims)
ซึ่งต่างจากผลงานชิ้นอื่น ๆ เนื่องจาก Remix นั้นเป็น React Framework ที่เน้นการ Render Page แบบ Server Side Rendering
จึงต้องลดการเชื่อมต่อไปยังฐานข้อมูลภายนอกอย่าง Firebase Firestore เป็นต้น

#### 2. การส่งคำขอเพลง

การส่งคำขอเพลงในระบบ
